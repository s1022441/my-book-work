<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>Books CRUD è¶…ç°¡å–®ç‰ˆ</title>
  <style>
    body { font-family: Arial; background:#f5f6fa; padding:20px; }
    .card { background:#fff; padding:16px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    label { display:block; margin-top:8px; }
    input { width:100%; padding:6px; }
    button { margin-top:10px; padding:6px 12px; }
    pre { background:#222; color:#fff; padding:10px; }
  </style>
</head>
<body>

<h1>ðŸ“š Books CRUDï¼ˆæ–°æ‰‹å®‰å¿ƒç‰ˆï¼‰</h1>

<div class="card">
  <h2>GET Bookï¼ˆæŸ¥è©¢ï¼‰</h2>
  <label>Book ID</label>
  <input id="getId" type="number" />
  <button onclick="getBook()">æŸ¥è©¢</button>
  <pre id="getResult"></pre>
</div>

<div class="card">
  <h2>POST Bookï¼ˆæ–°å¢žï¼‰</h2>
  <label>Title</label><input id="postTitle" />
  <label>Author</label><input id="postAuthor" />
  <label>Image URL</label><input id="postImage" />
  <label>Price</label><input id="postPrice" type="number" />
  <label>Published Date</label><input id="postDate" />
  <button onclick="postBook()">æ–°å¢ž</button>
  <pre id="postResult"></pre>
</div>

<div class="card">
  <h2>PUT Bookï¼ˆæ›´æ–°ï¼‰</h2>
  <label>Book ID</label><input id="putId" type="number" />
  <label>Title</label><input id="putTitle" />
  <label>Author</label><input id="putAuthor" />
  <label>Image URL</label><input id="putImage" />
  <label>Price</label><input id="putPrice" type="number" />
  <label>Published Date</label><input id="putDate" />
  <button onclick="putBook()">æ›´æ–°</button>
  <pre id="putResult"></pre>
</div>

<div class="card">
  <h2>DELETE Bookï¼ˆåˆªé™¤ï¼‰</h2>
  <label>Book ID</label><input id="deleteId" type="number" />
  <button onclick="deleteBook()">åˆªé™¤</button>
  <pre id="deleteResult"></pre>
</div>

<script>
const baseUrl = 'http://localhost:8080/books';

function getBook() {
  const id = document.getElementById('getId').value;
  fetch(baseUrl + '/' + id)
    .then(res => res.json())
    .then(data => {
      document.getElementById('getResult').textContent = JSON.stringify(data, null, 2);
    })
    .catch(() => alert('æŸ¥è©¢å¤±æ•—'));
}

function postBook() {
  const body = {
    title: postTitle.value,
    author: postAuthor.value,
    imageUrl: postImage.value,
    price: Number(postPrice.value),
    publishedDate: postDate.value
  };

  fetch(baseUrl, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(body)
  })
  .then(res => res.json())
  .then(data => postResult.textContent = JSON.stringify(data, null, 2));
}

function putBook() {
  const id = putId.value;
  const body = {
    title: putTitle.value,
    author: putAuthor.value,
    imageUrl: putImage.value,
    price: Number(putPrice.value),
    publishedDate: putDate.value
  };

  fetch(baseUrl + '/' + id, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(body)
  })
  .then(res => res.json())
  .then(data => putResult.textContent = JSON.stringify(data, null, 2));
}

function deleteBook() {
  const id = deleteId.value;
  fetch(baseUrl + '/' + id, { method: 'DELETE' })
    .then(res => {
      if (res.status === 204) deleteResult.textContent = 'æ›¸æœ¬å·²ç¶“åˆªé™¤';
    });
}
</script>

</body>
</html>
